<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ubuntu上安装和配置FreeRadius和DaloRadius - 小V吃鱼卡到了</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="http://www.zhuimengle.com/theme/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="http://www.zhuimengle.com/theme/css/niu2.min.css" type="text/css" />

    <link rel="canonical" href="http://www.zhuimengle.com/note/freeradius_daloradius_install_config_on_ubuntu.html" />
    
    <script type="text/javascript">window.onload=function(){};</script>
    <!--[if lt IE 9]>
        <script src="http://www.zhuimengle.com/theme/js/html5shiv.js"></script>
        <script src="http://www.zhuimengle.com/theme/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body> 
    <div id="body-header">
<div class="navbar navbar-inverse navbar-fixed-top">
<div class="col-md-12">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.zhuimengle.com">
            <i class="fa fa-home"></i>小V吃鱼卡到了
        </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
        <ul class="nav navbar-nav">
            <li><a href="/about.html" title="about me">
                <i class="fa fa-anchor"></i>关于</a>
            </li>
            <li><a href="/archives.html" title="blog archives">
                <i class="fa fa-archive"></i>存档</a>
            </li>
            <li><a href="/tag/" title="blog tags">
                <i class="fa fa-tag"></i>标签</a>
            </li>
        <!-- category dropdown list -->
        <li class="dropdown">
           <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <i class="fa fa-folder-open"></i>分类<b class="caret"></b>
           </a>
           <ul class="dropdown-menu">
               <li><a href="http://www.zhuimengle.com/note/index.html">
                      <i class="fa fa-book"></i>印象-笔记
                      (88)</a></li>
               <li><a href="http://www.zhuimengle.com/research/index.html">
                      <i class="fa fa-flask"></i>实验室
                      (2)</a></li>
           </ul>
        </li>
        <!--  self defined dropdown list -->
        </ul>
        
        <!-- right nav bar -->
        <ul class="nav navbar-nav navbar-right">
        <!-- google custom search -->
       </ul>
    </nav>
</div>
</div>    </div>
    
    <div id="body-content">
<div class="col-md-8 col-md-offset-2">
    <h1 id="content-heading">Ubuntu上安装和配置FreeRadius和DaloRadius</h1>
</div>
<div id="niu2-left-container" class="col-md-6 col-md-offset-2 with-right-border">
    <div id="niu2-main-content">
        <p>总结我在Ubuntu上安装FreeRadius和DaloRadius的步骤及遇到的问题，以供日后查询，系统为Ubuntu 12.04.3 X86_64，本文的FreeRadius配置使用MySQL作为后端存储相关数据。</p>
<p>FreeRadius可以为pptp和l2tp提供验证和统计等功能，DaloRadius为FreeRadius提供一个网页界面。阅读本文前确保已经正确安装了pptpd或xl2tpd服务器。相关安装配置教程可参考<a href="/note/pptpd.html" title="blog.atime.me/note/pptpd.html">使用pptpd搭建VPN</a>和<a href="/note/l2tp_ipsec_installation_on_ubuntu.html" title="blog.atime.me/note/l2tp_ipsec_installation_on_ubuntu.html">在Ubuntu12.04上安装l2tp/ipsec VPN服务器</a>。</p>
<p>开始安装前建议先通读一下<a href="http://en.wikipedia.org/wiki/RADIUS" title="http://en.wikipedia.org/wiki/RADIUS">wikipedia:RADIUS</a>和<a href="http://blog.csdn.net/liang13664759/article/details/1574367" title="http://blog.csdn.net/liang13664759/article/details/1574367">radius介绍</a>，了解一些radius的概念。</p>
<h2 id="44eb700291611eb4a52e639270150092">安装必要的软件</h2>
<div class="codehilite"><pre>sudo apt-get install freeradius freeradius-mysql radiusclient1 php5 php5-mysql php5-gd php5-cgi php5-fpm php-pear php-db mysql-server-5.5
</pre></div>


<h2 id="eb471ba5d12c57fca888e6aa110bdcc2">配置FreeRadius</h2>
<p>FreeRadius的配置文件位于<code>/etc/freeradius</code>目录。</p>
<h3 id="8fa2585857c5677442ed9b23e727fb04">添加client</h3>
<p>修改<code>/etc/freeradius/clients.conf</code>，添加如下内容，注意将<code>IP_ADDRESS</code>和<code>SHARED_SECRET</code>换为你的服务器IP和你的共享密钥。</p>
<div class="codehilite"><pre>client IP_ADDRESS {
    ipaddr = IP_ADDRESS
    secret = SHARED_SECRET
    require_message_authenticator = no
}
</pre></div>


<h3 id="23c7575ebf0457b6f719a02e6b8de7a0">启用MySQL支持</h3>
<h4 id="603b512c0b75923a91b1d5ec45f6142b">/etc/freeradius/radiusd.conf</h4>
<p>取消如下一行的注释来包含FreeRadius的sql配置文件<code>/etc/freeradius/sql.conf</code>。</p>
<div class="codehilite"><pre>$INCLUDE sql.conf
</pre></div>


<h4 id="416748a04f1d76def4ab972f271c6ea2">/etc/freeradius/sql.conf</h4>
<p>修改<code>/etc/freeradius/sql.conf</code>，设置MySQL数据库的端口，radius数据库的用户名密码等内容。取消如下一行的注释，使FreeRadius从数据库读取客户端信息。</p>
<div class="codehilite"><pre>readclients = yes
</pre></div>


<p><code>/etc/freeradius/sql/mysql</code>文件夹下的众多sql脚本文件用于构建FreeRadius的数据库，首先在admin.sql里修改数据库名称，用户名和密码等内容，这些内容必须和<code>/etc/freeradius/sql.conf</code>的设置相同。</p>
<h4 id="0f57003da9f6808dc6d71ab32e303f69">/etc/freeradius/sql/mysql/dialup.conf</h4>
<p>修改<code>/etc/freeradius/sql/mysql/dialup.conf</code>，取消如下几行的注释来提供在线人数统计功能。</p>
<div class="codehilite"><pre>simul_verify_query  = &quot;SELECT radacctid, acctsessionid, username, \
                       nasipaddress, nasportid, framedipaddress, \
                       callingstationid, framedprotocol \
                       FROM ${acct_table1} \
                       WHERE username = &#39;%{SQL-User-Name}&#39; \
                       AND acctstoptime IS NULL&quot;
</pre></div>


<h4 id="8d18b3b1bb252f78c83218ab3d130d98">创建FreeRadius数据库radius</h4>
<p>登录mysql</p>
<div class="codehilite"><pre>cd /etc/freeradius/sql/mysql
mysql -u root -p
</pre></div>


<p>输入以下命令</p>
<div class="codehilite"><pre>create database radius;

source admin.sql;
source cui.sql;
source ippool.sql;
source nas.sql;
source schema.sql;
source wimax.sql;
</pre></div>


<h4 id="2073685d4c7fe3c34d7dfdf97531e251">/etc/freeradius/sites-enabled</h4>
<p>对<code>/etc/freeradius/sites-enabled/default</code>做如下修改</p>
<blockquote>
<p>找到authorize {}模块，注释掉files，去掉sql前的#号</p>
<p>找到accounting {}模块，注释掉radutmp,注释掉去掉sql前面的#号。</p>
<p>找到session {}模块，注释掉radutmp，去掉sql前面的#号。</p>
<p>找到post-auth {}模块，去掉sql前的#号，去掉sql前的#号（Post-Auth-Type REJECT内）。</p>
</blockquote>
<p>对<code>/etc/freeradius/sites-enabled/inner-tunnel</code>做如下修改</p>
<blockquote>
<p>找到authorize {}模块，注释掉files，去掉sql前的#号。</p>
<p>找到session {}模块，注释掉radutmp，去掉sql前面的#号。</p>
<p>找到post-auth {}模块，去掉sql前的#号，去掉sql前的#号（Post-Auth-Type REJECT内）。</p>
</blockquote>
<h2 id="0c7c13172e75d9cb7414cba2238fe9c0">配置RadiusClient</h2>
<p>RadiusClient用于将pptpd和xl2tpd的radius插件的验证请求发送给FreeRadius服务器，充当nas的角色，其配置文件位于<code>/etc/radiusclient</code>内。</p>
<h3 id="91c87df1029e894b6d61e54387313c10">添加字典</h3>
<p>RadiusClient的字典主要负责参数的映射，默认配置没有包含dictionary.microsoft，因此无法处理使用mschapv2加密的请求头。下载dictionary.microsoft并包含到主dictonary文件中。</p>
<div class="codehilite"><pre>cd /etc/radiusclient
sudo wget http://blog.atime.me/static/resource/dictionary.microsoft
</pre></div>


<p>在<code>/etc/radiusclient/dictionary</code>文件的最后添加如下一行以包含dictionary.microsoft</p>
<div class="codehilite"><pre>INCLUDE /etc/radiusclient/dictionary.microsoft
</pre></div>


<p>为解决FreeRadius的<code>radacct</code>表不更新的问题，需要在<code>/etc/radiusclient/dictionary</code>中加入如下一行，以保证RadiusClient能够识别Acct-Interim-Interval。</p>
<div class="codehilite"><pre>ATTRIBUTE Acct-Interim-Interval 85 integer
</pre></div>


<p>另外，记得在daloRadius里为用户添加<code>Acct-Interim-Interval</code> reply attribute（对应MySQL的radgroupreply表）。</p>
<h3 id="0f7d48ec37743528627819920224cf7d">设置共享密钥</h3>
<p>修改'/etc/radiusclient/servers'文件，添加如下一行，注意SHARED_SECRET必须和你在<code>/etc/freeradius/clients.conf</code>里设置的<a href="#8fa2585857c5677442ed9b23e727fb04" title="添加client">共享密钥</a>相同。</p>
<div class="codehilite"><pre>localhost   SHARED_SECRET
</pre></div>


<h2 id="3badedc723b6a61450595e75741f9de2">配置VPN服务器</h2>
<p>为pptpd和xl2tpd启用radius插件，首先查找插件的位置。</p>
<div class="codehilite"><pre>sudo updatedb
locate radius.so
</pre></div>


<p>插件通常位于<code>/usr/lib/pppd/2.4.5/radius.so</code>。</p>
<h3 id="c1568605c39111d82d3c5a398672270a">配置pptpd</h3>
<p>查看<code>/etc/pptpd.conf</code>，获取pptpd的ppp配置文件位置</p>
<div class="codehilite"><pre>option /etc/ppp/pptpd-options
</pre></div>


<p>修改<code>/etc/ppp/pptpd-options</code>文件，在最后添加如下两行，注意修改插件的具体位置。</p>
<div class="codehilite"><pre>plugin /usr/lib/pppd/2.4.5/radius.so
radius-config-file /etc/radiusclient/radiusclient.conf
</pre></div>


<p>重启pptpd</p>
<div class="codehilite"><pre>sudo service pptpd restart
</pre></div>


<h3 id="e1ef2cbd6a4872b973ab290e3f1d3cba">配置xl2tpd</h3>
<p>查看<code>/etc/xl2tpd/xl2tpd.conf</code>，获取xl2tpd的ppp配置文件位置</p>
<div class="codehilite"><pre>pppoptfile = /etc/ppp/xl2tpd-options
</pre></div>


<p>修改<code>/etc/ppp/xl2tpd-options</code>，在最后添加如下两行，注意修改插件的具体位置。</p>
<div class="codehilite"><pre>plugin  /usr/lib/pppd/2.4.5/radius.so
radius-config-file /etc/radiusclient/radiusclient.conf
</pre></div>


<p>重启xl2tpd</p>
<div class="codehilite"><pre>sudo service xl2tpd restart
</pre></div>


<h2 id="b61ca12bba2c39e441516b8c5a0393d3">配置DaloRadius</h2>
<h3 id="69a9a8cfee4c4d21e9b487f59dbe1dd9">下载并配置daloRadius</h3>
<p>daloRadius的项目托管在<a href="http://sourceforge.net/projects/daloradius/" title="http://sourceforge.net/projects/daloradius/">sourceforge</a>上，下载并解压。</p>
<div class="codehilite"><pre><span class="c"># 下载并解压</span>
<span class="nb">cd</span> /tmp
sudo wget http://sourceforge.net/projects/daloradius/files/daloradius/daloradius0.9-9/daloradius-0.9-9.tar.gz
<span class="nb">cd</span> /var/www
sudo tar -xvf /tmp/daloradius-0.9-9.tar.gz
sudo mv daloradius-0.0.9 daloradius

<span class="c"># 修改权限</span>
sudo chown -R www-data:www-data daloradius
sudo chmod 644 daloradius/library/daloradius.conf.php
</pre></div>


<p>修改<code>/var/www/daloradius/library/daloradius.conf.php</code>，设置关于FreeRadius数据库的各个变量，注意和<code>/etc/freeradius/sql.conf</code>的配置相同。</p>
<div class="codehilite"><pre>$configValues[&#39;FREERADIUS_VERSION&#39;] = &#39;2&#39;;
$configValues[&#39;CONFIG_DB_ENGINE&#39;] = &#39;mysql&#39;;
$configValues[&#39;CONFIG_DB_HOST&#39;] = &#39;localhost&#39;;
$configValues[&#39;CONFIG_DB_PORT&#39;] = &#39;3306&#39;;
$configValues[&#39;CONFIG_DB_USER&#39;] = &#39;radius&#39;;
$configValues[&#39;CONFIG_DB_PASS&#39;] = &#39;raduser&#39;;
</pre></div>


<p>其他需要修改的变量，其中<code>SHARED_SECRET</code>要和<code>/etc/freeradius/clients.conf</code>设置的<a href="#8fa2585857c5677442ed9b23e727fb04" title="添加client">共享密钥</a>相同。</p>
<div class="codehilite"><pre>$configValues[&#39;CONFIG_PATH_DALO_VARIABLE_DATA&#39;] = &#39;/var/www/daloradius/var&#39;;
$configValues[&#39;CONFIG_MAINT_TEST_USER_RADIUSSECRET&#39;] = &#39;SHARED_SECRET&#39;;
</pre></div>


<h3 id="7486e5b921d5e29491f984c0ba68dcbf">为daloRadius创建MySQL数据表</h3>
<p>由于之前已经为FreeRadius创建了相应的表结构，这里只需要为daloRadius创建表即可</p>
<div class="codehilite"><pre>cd /var/www/daloradius/contrib/db/
mysql -u root -p radius &lt; mysql-daloradius.sql
</pre></div>


<p>由于daloRadius向FreeRadius的数据库<code>radius</code>添加了若干新表，我们需要为FreeRadius的数据库用户添加这几张表的访问权限。 FreeRadius的数据库名称和用户可查看<code>/etc/freeradius/sql.conf</code>，这里使用默认数据库radius和默认用户radius。</p>
<p>登录MySQL数据库</p>
<div class="codehilite"><pre>mysql -u root -p
</pre></div>


<p>输入如下命令</p>
<div class="codehilite"><pre>revoke all privileges on *.* from &#39;radius&#39;@&#39;localhost&#39;;
grant all privileges on radius.* to &#39;radius&#39;@&#39;localhost&#39;;
flush privileges;
exit
</pre></div>


<h3 id="5f33f1772a14198fdf64e8343832ca16">配置nginx</h3>
<p>首先在dns服务商添加一条新的A记录<code>daloradius</code>，然后添加新的nginx配置文件<code>/etc/nginx/sites-available/daloradius.conf</code>，确定已正确安装并启动了php5-fpm。</p>
<p>注意将server_name中的<code>your.domain</code>改为你自己的域名。</p>
<div class="codehilite"><pre><span class="k">server</span> <span class="p">{</span>
    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span>  <span class="s">daloradius.your.domain</span><span class="p">;</span>
    <span class="kn">root</span> <span class="s">/home/wilbur/www/daloradius</span><span class="p">;</span>

    <span class="kn">access_log</span>  <span class="s">/var/log/nginx/daloradius.access.log</span> <span class="s">main</span><span class="p">;</span>
    <span class="kn">error_log</span>   <span class="s">/var/log/nginx/daloradius.error.log</span> <span class="s">warn</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">index</span> <span class="s">index.php</span><span class="p">;</span>
        <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="nv">$uri/</span> <span class="s">/index.php</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="p">~</span> <span class="sr">\.php$</span> <span class="p">{</span>
        <span class="kn">fastcgi_pass</span>   <span class="n">127.0.0.1</span><span class="p">:</span><span class="mi">9000</span><span class="p">;</span>
        <span class="kn">fastcgi_index</span>  <span class="s">index.php</span><span class="p">;</span>
        <span class="kn">fastcgi_param</span>  <span class="s">SCRIPT_FILENAME</span> <span class="nv">$document_root$fastcgi_script_name</span><span class="p">;</span>
        <span class="kn">include</span>        <span class="s">fastcgi_params</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="p">~</span> <span class="sr">/\.ht</span> <span class="p">{</span>
        <span class="kn">deny</span> <span class="s">all</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>链接到<code>/etc/nginx/sites-enabled/</code>目录后重启相关服务程序。</p>
<div class="codehilite"><pre>cd /etc/nginx/sites-enabled/
sudo ln -s ../sites-available/daloradius.conf .

#sudo service php5-fpm restart
sudo service nginx restart
sudo service freeradius restart
</pre></div>


<p>dns更改生效后，访问http://daloradius.your.domain即可配置FreeRadius，默认的用户名是administrator，密码是radius。</p>
<h3 id="a73a19ab5b9a8abf63aac3ee967fd2e5">daloRadius界面指南</h3>
<p>daloRadius的管理账户存储在MySQL的<code>radius.operators</code>表中，密码使用明文存储。</p>
<div class="codehilite"><pre>Management =&gt; Users 管理VPN用户，注意添加新用户时，应选择Cleartext-Password（默认）密码类型

Config =&gt; Operators 管理daloRadius的登录账户，包括修改密码和权限设置等
Config =&gt; Interface Settings =&gt; Enable Password Hiding 设为yes可以将界面上的明文密码改为点号隐藏
</pre></div>


<h2 id="a52f4a295d804e3338e36aeab0343bc6">排查错误</h2>
<h3 id="a556b31d6a7d3cd91ac8dfda9824354a">使用调试模式启动FreeRadius</h3>
<div class="codehilite"><pre>freeradius -X
</pre></div>


<h3 id="39d1892b3c8be9276316e76e363f6ede">使用radtest</h3>
<p>radtest可以向freeradius服务器发送请求，不过目前不支持mschapv2加密模式，详情见<code>man radtest</code>。</p>
<div class="codehilite"><pre>radtest user password localhost 0 shared_secret
</pre></div>


<h3 id="f1c0905c480f2e13953916f86d3b6659">异常掉线的用户在daloRadius显示为在线用户</h3>
<p>异常掉线的client无法在退出时更新<code>radius.radacct</code>表的<code>acctstoptime</code>，这些client在daloRadius里会被显示为在线用户。使用如下的命令可修复该问题，最好使用cron定期执行该任务。</p>
<div class="codehilite"><pre>mysql -uroot -p -e &quot;UPDATE radius.radacct SET acctstoptime = acctstarttime + acctsessiontime WHERE ((UNIX_TIMESTAMP(acctstarttime) + acctsessiontime + 240 - UNIX_TIMESTAMP())&lt;0) AND acctstoptime IS NULL;&quot;
</pre></div>


<h2 id="81f5d554d30e82d475ed29a45a7c4277">阅读资料</h2>
<ol>
<li><a href="http://wangyan.org/blog/freeradius-pptp-l2tp-html.html">PPTP/L2TP + FreeRADIUS + MySQL 安装与配置</a></li>
<li><a href="http://blog.dayanjia.com/2011/03/configure-freeradius-and-daloradius-on-pptp-vpn-server/">在PPTP VPN服务器上配置FreeRADIUS+daloRADIUS实现用户跟踪管理</a></li>
<li><a href="http://poptop.sourceforge.net/dox/skwok/poptop_ads_howto_a5.htm" title="http://poptop.sourceforge.net/dox/skwok/poptop_ads_howto_a5.htm">RadiusClient配置</a></li>
<li><a href="https://help.ubuntu.com/community/CategoryNetworking/daloRADIUS" title="https://help.ubuntu.com/community/CategoryNetworking/daloRADIUS">daloRADIUS Ubuntu help</a></li>
</ol>
    </div>
    <div id="content-comments">
<!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">var duoshuoQuery={short_name:"vic-story"};(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src=(document.location.protocol=="https:"?"https:":"http:")+"//static.duoshuo.com/embed.js";a.charset="UTF-8";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)})();</script>
<!-- Duoshuo Comment END --></div>

</div>
<div class="niu2-right-container col-md-2">
    <div id="niu2-sidebar-meta" class="niu2-sidebar">
        <div class="niu2-sidebar-label"><i class="fa fa-calendar"></i>发布时间:</div>
        <div class="niu2-sidebar-value">2013-11-07 17:50</div>
        <div class="niu2-sidebar-label"><i class="fa fa-pencil" style="font-size: 1.05em;"></i>最后修改:</div>
        <div class="niu2-sidebar-value">2013-11-12 15:50</div>
        <div class="niu2-sidebar-label"><i class="fa fa-book"></i>分类:</div>
        <div class="niu2-sidebar-value"><a href="http://www.zhuimengle.com/note/index.html">印象-笔记</a></div>
        <div class="niu2-sidebar-label"><i class="fa fa-tag"></i>标签:</div>
 
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/radius.html">radius</a><sup>1</sup></div>
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/vpn.html">vpn</a><sup>3</sup></div>
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/ubuntu.html">ubuntu</a><sup>15</sup></div>
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/jiao-cheng.html">教程</a><sup>13</sup></div>
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/note.html">note</a><sup>14</sup></div>
    </div>
</div>

<div class="niu2-right-container col-md-3">
    <div id="niu2-sidebar-toc" class="niu2-sidebar" data-status="closed">
        <div class="niu2-sidebar-label">
            <i id="niu2-sidebar-toc-ctrl" class="fa fa-plus"></i>目录
        </div>
        <ol id="niu2-sidebar-toc-list">
            <li><a href="#content-heading">Ubuntu上安装和配置FreeRadius和DaloRadius</a></li>
            <li><a href='#44eb700291611eb4a52e639270150092'>安装必要的软件</a></li><li><a href='#eb471ba5d12c57fca888e6aa110bdcc2'>配置FreeRadius</a><ol><li><a href='#8fa2585857c5677442ed9b23e727fb04'>添加client</a></li><li><a href='#23c7575ebf0457b6f719a02e6b8de7a0'>启用MySQL支持</a><ol><li><a href='#603b512c0b75923a91b1d5ec45f6142b'>/etc/freeradius/radiusd.conf</a></li><li><a href='#416748a04f1d76def4ab972f271c6ea2'>/etc/freeradius/sql.conf</a></li><li><a href='#0f57003da9f6808dc6d71ab32e303f69'>/etc/freeradius/sql/mysql/dialup.conf</a></li><li><a href='#8d18b3b1bb252f78c83218ab3d130d98'>创建FreeRadius数据库radius</a></li><li><a href='#2073685d4c7fe3c34d7dfdf97531e251'>/etc/freeradius/sites-enabled</a></li></ol></li></ol></li><li><a href='#0c7c13172e75d9cb7414cba2238fe9c0'>配置RadiusClient</a><ol><li><a href='#91c87df1029e894b6d61e54387313c10'>添加字典</a></li><li><a href='#0f7d48ec37743528627819920224cf7d'>设置共享密钥</a></li></ol></li><li><a href='#3badedc723b6a61450595e75741f9de2'>配置VPN服务器</a><ol><li><a href='#c1568605c39111d82d3c5a398672270a'>配置pptpd</a></li><li><a href='#e1ef2cbd6a4872b973ab290e3f1d3cba'>配置xl2tpd</a></li></ol></li><li><a href='#b61ca12bba2c39e441516b8c5a0393d3'>配置DaloRadius</a><ol><li><a href='#69a9a8cfee4c4d21e9b487f59dbe1dd9'>下载并配置daloRadius</a></li><li><a href='#7486e5b921d5e29491f984c0ba68dcbf'>为daloRadius创建MySQL数据表</a></li><li><a href='#5f33f1772a14198fdf64e8343832ca16'>配置nginx</a></li><li><a href='#a73a19ab5b9a8abf63aac3ee967fd2e5'>daloRadius界面指南</a></li></ol></li><li><a href='#a52f4a295d804e3338e36aeab0343bc6'>排查错误</a><ol><li><a href='#a556b31d6a7d3cd91ac8dfda9824354a'>使用调试模式启动FreeRadius</a></li><li><a href='#39d1892b3c8be9276316e76e363f6ede'>使用radtest</a></li><li><a href='#f1c0905c480f2e13953916f86d3b6659'>异常掉线的用户在daloRadius显示为在线用户</a></li></ol></li><li><a href='#81f5d554d30e82d475ed29a45a7c4277'>阅读资料</a></li>
            <li><a href="#content-comments">评论</a></li>
        </ol>
    </div>
</div>
    </div>

    <div id="body-footer" class="col-md-6 col-md-offset-2">
<div class="niu2-footer">
    <hr/>
	<p>
		Powered by <a href="https://github.com/getpelican/pelican">Pelican</a>, 
        <a href="https://github.com/mawenbao/niu-x2-sidebar">theme</a> built with <a href="http://getbootstrap.com">Bootstrap3</a>
		by <a href="http://blog.atime.me">Ma Wenbao</a>, icons by 
		<a href="http://fortawesome.github.io/Font-Awesome">Font Awesome</a>.
	</p>
	<p>
		©
				2009-2014
		<a class="niu2-footer-link" href="http://www.zhuimengle.com">vk</a>
    </p>
    <p class="niu2-icons">
	        <a class="niu2-footer-icon" href="/my_gnupg.html" title="my public key">
	            <i class="fa fa-key fa-lg"></i>
	        </a>
	        <a class="niu2-footer-icon" href="V: dolphinzhang1987@gmail.com" title="my email address">
	            <i class="fa fa-envelope-o fa-lg"></i>
	        </a>
	        <a class="niu2-footer-icon" href="https://github.com/vickyi" title="my github page">
	            <i class="fa fa-github-alt fa-lg"></i>
	        </a>
	        <a class="niu2-footer-icon" href="/feed.xml" title="subscribe my blog">
	            <i class="fa fa-rss fa-lg"></i>
	        </a>
	</p>
</div>    </div>
    
    <div id="niu2-pygments" data-theme="github"></div>

    <script type="text/javascript" src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="http://www.zhuimengle.com/theme/js/niu2.min.js"></script>
    <script type="text/javascript" src="http://www.zhuimengle.com/theme/js/bootstrap.min.js"></script>
    <script type="text/javascript">onContentLoaded();</script>
  </body>
</html>