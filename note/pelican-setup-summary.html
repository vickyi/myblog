<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pelican静态博客搭建总结 - 小V吃鱼卡到了</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="http://www.zhuimengle.com/theme/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="http://www.zhuimengle.com/theme/css/niu2.min.css" type="text/css" />

    <link rel="canonical" href="http://www.zhuimengle.com/note/pelican-setup-summary.html" />
    
    <script type="text/javascript">window.onload=function(){};</script>
    <!--[if lt IE 9]>
        <script src="http://www.zhuimengle.com/theme/js/html5shiv.js"></script>
        <script src="http://www.zhuimengle.com/theme/js/respond.min.js"></script>
    <![endif]-->
  </head>
  <body> 
    <div id="body-header">
<div class="navbar navbar-inverse navbar-fixed-top">
<div class="col-md-12">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.zhuimengle.com">
            <i class="fa fa-home"></i>小V吃鱼卡到了
        </a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
        <ul class="nav navbar-nav">
            <li><a href="/about.html" title="about me">
                <i class="fa fa-anchor"></i>关于</a>
            </li>
            <li><a href="/agreement.html" title="agreement">
                <i class="fa fa-info-circle"></i>使用协议</a>
            </li>
            <li><a href="/my_projects.html" title="my projects">
                <i class="fa fa-rocket"></i>项目</a>
            </li>
            <li><a href="/archives.html" title="blog archives">
                <i class="fa fa-archive"></i>存档</a>
            </li>
            <li><a href="/tag/" title="blog tags">
                <i class="fa fa-tag"></i>标签</a>
            </li>
        <!-- category dropdown list -->
        <li class="dropdown">
           <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                <i class="fa fa-folder-open"></i>分类<b class="caret"></b>
           </a>
           <ul class="dropdown-menu">
               <li><a href="http://www.zhuimengle.com/note/index.html">
                      <i class="fa fa-book"></i>印象-笔记
                      (88)</a></li>
               <li><a href="http://www.zhuimengle.com/research/index.html">
                      <i class="fa fa-flask"></i>实验室
                      (2)</a></li>
           </ul>
        </li>
        <!--  self defined dropdown list -->
        </ul>
        
        <!-- right nav bar -->
        <ul class="nav navbar-nav navbar-right">
        <!-- google custom search -->
       </ul>
    </nav>
</div>
</div>    </div>
    
    <div id="body-content">
<div class="col-md-8 col-md-offset-2">
    <h1 id="content-heading">Pelican静态博客搭建总结</h1>
</div>
<div id="niu2-left-container" class="col-md-6 col-md-offset-2 with-right-border">
    <div id="niu2-main-content">
        <p>介绍Pelican并总结在搭建Pelican博客过程中需要注意的问题等。</p>
<h2 id="e09fcbc7fa8e37b9e7b4a502a41153ac">Pelican介绍</h2>
<p><a href="https://github.com/getpelican/pelican" title="pelican">Pelican</a>是一个用Python语言编写的静态网站生成器，支持使用restructuredText和Markdown写文章，配置灵活，扩展性强。目前Pelican已发布3.2.2版本，有许多优秀的<a href="https://github.com/getpelican/pelican-themes" title="pelican官方主题仓库">主题</a>和<a href="https://github.com/getpelican/pelican-plugins" title="pelican官方插件仓库">插件</a>可供使用。</p>
<h2 id="950726c63c4b07f27b174feecf3f3b0c">配置文件介绍</h2>
<p>以下内容以Pelican3.2.2的配置文件为标准，选择部分难设置的变量进行说明。</p>
<h3 id="15309dd0c41c73687ada609394f3f0bf">时区和时间设置</h3>
<p>时间的具体显示样式取决于所使用的主题，需要查看对应的jinja2代码，时间的格式见<a href="http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior" title="python strftime 格式">这里</a>。</p>
<div class="codehilite"><pre>TIMEZONE = &#39;Asia/Shanghai&#39;
DEFAULT_DATE_FORMAT = &#39;%Y-%m-%d %H:%M:%S&#39;
</pre></div>


<h3 id="f98c3f61dd0719d1f701a6911cf11247">其他有用的设置</h3>
<p>使用目录名作为文章的分类名</p>
<div class="codehilite"><pre>USE_FOLDER_AS_CATEGORY = True
</pre></div>


<p>使用文件名作为文章或页面的slug（url）</p>
<div class="codehilite"><pre>FILENAME_METADATA = &#39;(?P&lt;slug&gt;.*)&#39;
</pre></div>


<p>页面的显示路径和保存路径，推荐下面的方式</p>
<div class="codehilite"><pre>ARTICLE_URL = &#39;{category}/{slug}.html&#39;
ARTICLE_SAVE_AS = ARTICLE_URL
PAGE_URL = &#39;{slug}.html&#39;
PAGE_SAVE_AS = PAGE_URL
CATEGORY_URL = &#39;{slug}/index.html&#39;
CATEGORY_SAVE_AS = CATEGORY_URL
TAG_URL = &#39;tag/{slug}.html&#39;
TAG_SAVE_AS = TAG_URL
TAGS_SAVE_AS = &#39;tag/index.html&#39;
</pre></div>


<h2 id="fc5eaf5ef45d4b8ecd1b58a895055e5d">需要注意的问题</h2>
<h3 id="cae4e00f984f65fd531764d778041f0c">编码问题</h3>
<p>对于使用python2.x的同学，如果遇到<code>ascii codec cannot decode ...</code>之类的问题，建议参照<a href="/note/python-notes.html#11d0f24533a5bf4819deb8f98b5375de" title="python2.x设置默认编码为UTF-8">这里</a>的方法将python的默认编码设置为UTF-8。</p>
<h2 id="784680abc33f627a71451540c99cebc0">优秀主题推荐</h2>
<p>官方主题仓库见<a href="https://github.com/getpelican/pelican-themes" title="pelican官方主题仓库">这里</a>，另外github上还有许多没有加入官方主题仓库的优秀pelican主题，请善用github的搜索功能。</p>
<h3 id="87ce766ce5c0b6317258df8c2eb0908c">Elegant</h3>
<p><a href="https://github.com/talha131/pelican-elegant" title="pelican-elegant主题">Elegant</a>是我见过的pelican主题里最优雅漂亮的一个了，功能也超齐全，<a href="http://oncrashreboot.com/pelican-elegant" title="pelican-elegant介绍和配置说明">这里</a>有一篇作者写的介绍和配置文章。</p>
<p><img alt="Elegant screenshoot" src="/static/images/pelican/pelican-elegant-home-page-screenshot.png" title="pelian-elegant theme screenshoot" /></p>
<h3 id="53ceb81688d679b0502ef974b615ac0a">Niu-X2</h3>
<p>接下来是毛遂自荐，Niu-X2是本人业余时间用bootstrap3创作的一个主题，<del>本站目前正在用</del>，功能比较齐全，不算漂亮但很对我自己的口味，代码和配置方法都在<a href="https://github.com/mawenbao/niu-x2" title="niu-x2主题">这里</a>。官方主题仓库里的那个niu-x2版本比较老了，如果感兴趣请直接从我的仓库里拉取。</p>
<p><img alt="niu-x2 screenshoot" src="/static/images/pelican/pelican-niu-x2-screenshot.png" title="pelican niu-x2 theme screenshoot" /></p>
<p>本博客目前在用的主题是Niu-X2的一个带侧边栏的分支，代码见<a href="https://github.com/mawenbao/niu-x2-sidebar" title="niu-x2带侧边栏的主题">niu-x2-sidebar</a>。相对与Niu-X2，目前的主题添加了目录定位和目录自动滚动等功能，同时还完善了脚注(footnote)支持(示例见<a href="http://blog.atime.me/note/golang-summary.html">这篇文章</a>)。需要注意的是，添加侧边栏后，主题的自适应性不如Niu-X2。具体表现是，当可视区域比较窄的时候，侧边栏会被置于页面底部，目前还没有解决办法。 </p>
<h2 id="0f77e9a0cbe95e8a83e19aee15aeae8b">优秀插件推荐</h2>
<p>使用插件会延长pelican的编译时间，不过这不是什么问题。这里仅推荐我认为必备的插件，另外官方插件仓库见<a href="https://github.com/getpelican/pelican-plugins" title="pelican官方插件仓库">这里</a>。</p>
<h3 id="e1da49db34b0bdfdddaba2ad6552f848">sitemap</h3>
<p><a href="https://github.com/getpelican/pelican-plugins/tree/master/sitemap" title="pelican sitemap插件">sitemap</a>可以生成xml和txt格式的网站地图，配置见插件的readme。配置举例：</p>
<div class="codehilite"><pre>SITEMAP = {
    &#39;format&#39;: &#39;xml&#39;,
    &#39;priorities&#39;: {
        &#39;articles&#39;: 0.5,
        &#39;indexes&#39;: 0.5,
        &#39;pages&#39;: 0.5
        },
    &#39;changefreqs&#39;: {
        &#39;articles&#39;: &#39;weekly&#39;,
        &#39;indexes&#39;: &#39;daily&#39;,
        &#39;pages&#39;: &#39;monthly&#39;
        }
    }
</pre></div>


<h3 id="e1c41ea42ac4baf68f109e3376ab0aa3">gzip_cache</h3>
<p><a href="https://github.com/getpelican/pelican-plugins/tree/master/gzip_cache" title="pelican gzip_cache插件">gzip_cache</a>可以将所有的页面压缩为gz格式，有效加快页面的加载速度。</p>
<h2 id="8d9790dfe7b6e48dcd18ede57e5b9e87">我的配置文件</h2>
<p>下面贴一下我的配置文件，使用<a href="https://github.com/mawenbao/niu-x2-sidebar" title="niu-x2带侧边栏的主题">niu-x2-sidebar</a>主题，sitemap，gzip_cache和<a href="https://github.com/mawenbao/extract_headings" title="pelican extract_headings插件">extract_headings</a>插件。（因为某些原因，我屏蔽了google analytics id等敏感数据，请替换所有的<code>你看不见我</code> :D）</p>
<p>最新的配置文件请访问<a href="https://github.com/mawenbao/pelican-blog-content/blob/master/pelicanconf.py">pelican-blog-content/pelicanconf.py</a>。</p>
<script src="https://gist.github.com/mawenbao/8877732.js"></script>

<h2 id="81f5d554d30e82d475ed29a45a7c4277">阅读资料</h2>
<ul>
<li><a href="http://docs.getpelican.com/en/3.2/" title="pelican3.2文档">Pelican 3.2 官方文档</a></li>
</ul>
    </div>
    <div id="content-comments">
<!-- Duoshuo Comment BEGIN -->
<div class="ds-thread"></div>
<script type="text/javascript">var duoshuoQuery={short_name:"vic-story"};(function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src=(document.location.protocol=="https:"?"https:":"http:")+"//static.duoshuo.com/embed.js";a.charset="UTF-8";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)})();</script>
<!-- Duoshuo Comment END --></div>

</div>
<div class="niu2-right-container col-md-2">
    <div id="niu2-sidebar-meta" class="niu2-sidebar">
        <div class="niu2-sidebar-label"><i class="fa fa-calendar"></i>发布时间:</div>
        <div class="niu2-sidebar-value">2013-09-08 15:04</div>
        <div class="niu2-sidebar-label"><i class="fa fa-pencil" style="font-size: 1.05em;"></i>最后修改:</div>
        <div class="niu2-sidebar-value">2014-02-08 14:58</div>
        <div class="niu2-sidebar-label"><i class="fa fa-book"></i>分类:</div>
        <div class="niu2-sidebar-value"><a href="http://www.zhuimengle.com/note/index.html">印象-笔记</a></div>
        <div class="niu2-sidebar-label"><i class="fa fa-tag"></i>标签:</div>
 
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/pelican.html">pelican</a><sup>1</sup></div>
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/setup.html">setup</a><sup>1</sup></div>
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/static_blog.html">static_blog</a><sup>2</sup></div>
            <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="http://www.zhuimengle.com/tag/zong-jie.html">总结</a><sup>13</sup></div>
    </div>
</div>

<div class="niu2-right-container col-md-3">
    <div id="niu2-sidebar-toc" class="niu2-sidebar" data-status="closed">
        <div class="niu2-sidebar-label">
            <i id="niu2-sidebar-toc-ctrl" class="fa fa-plus"></i>目录
        </div>
        <ol id="niu2-sidebar-toc-list">
            <li><a href="#content-heading">Pelican静态博客搭建总结</a></li>
            <li><a href='#e09fcbc7fa8e37b9e7b4a502a41153ac'>Pelican介绍</a></li><li><a href='#950726c63c4b07f27b174feecf3f3b0c'>配置文件介绍</a><ol><li><a href='#15309dd0c41c73687ada609394f3f0bf'>时区和时间设置</a></li><li><a href='#f98c3f61dd0719d1f701a6911cf11247'>其他有用的设置</a></li></ol></li><li><a href='#fc5eaf5ef45d4b8ecd1b58a895055e5d'>需要注意的问题</a><ol><li><a href='#cae4e00f984f65fd531764d778041f0c'>编码问题</a></li></ol></li><li><a href='#784680abc33f627a71451540c99cebc0'>优秀主题推荐</a><ol><li><a href='#87ce766ce5c0b6317258df8c2eb0908c'>Elegant</a></li><li><a href='#53ceb81688d679b0502ef974b615ac0a'>Niu-X2</a></li></ol></li><li><a href='#0f77e9a0cbe95e8a83e19aee15aeae8b'>优秀插件推荐</a><ol><li><a href='#e1da49db34b0bdfdddaba2ad6552f848'>sitemap</a></li><li><a href='#e1c41ea42ac4baf68f109e3376ab0aa3'>gzip_cache</a></li></ol></li><li><a href='#8d9790dfe7b6e48dcd18ede57e5b9e87'>我的配置文件</a></li><li><a href='#81f5d554d30e82d475ed29a45a7c4277'>阅读资料</a></li>
            <li><a href="#content-comments">评论</a></li>
        </ol>
    </div>
</div>
    </div>

    <div id="body-footer" class="col-md-6 col-md-offset-2">
<div class="niu2-footer">
    <hr/>
	<p>
		Powered by <a href="https://github.com/getpelican/pelican">Pelican</a>, 
        <a href="https://github.com/mawenbao/niu-x2-sidebar">theme</a> built with <a href="http://getbootstrap.com">Bootstrap3</a>
		by <a href="http://blog.atime.me">Ma Wenbao</a>, icons by 
		<a href="http://fortawesome.github.io/Font-Awesome">Font Awesome</a>.
	</p>
	<p>
		©
				2009-2014
		<a class="niu2-footer-link" href="http://www.zhuimengle.com">vk</a>
    </p>
    <p class="niu2-icons">
	        <a class="niu2-footer-icon" href="/my_gnupg.html" title="my public key">
	            <i class="fa fa-key fa-lg"></i>
	        </a>
	        <a class="niu2-footer-icon" href="V: dolphinzhang1987@gmail.com" title="my email address">
	            <i class="fa fa-envelope-o fa-lg"></i>
	        </a>
	        <a class="niu2-footer-icon" href="https://github.com/vickyi" title="my github page">
	            <i class="fa fa-github-alt fa-lg"></i>
	        </a>
	        <a class="niu2-footer-icon" href="/feed.xml" title="subscribe my blog">
	            <i class="fa fa-rss fa-lg"></i>
	        </a>
	</p>
</div>    </div>
    
    <div id="niu2-pygments" data-theme="github"></div>

    <script type="text/javascript" src="//ajax.aspnetcdn.com/ajax/jQuery/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="http://www.zhuimengle.com/theme/js/niu2.min.js"></script>
    <script type="text/javascript" src="http://www.zhuimengle.com/theme/js/bootstrap.min.js"></script>
    <script type="text/javascript">onContentLoaded();</script>
  </body>
</html>